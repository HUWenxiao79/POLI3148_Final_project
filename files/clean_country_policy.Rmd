---
title: "clean_country_policy"
author: "Athena Zhang"
date: "2023-12-05"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
# loading tidyverse package
library(tidyverse)
```

```{r}
# importing data
d <- read.csv('data/ALL_COUNTRY.csv')
```

```{r}
# selecting relevant data
policy <- d |> 
  select('Country', 'Policy.Category', 'Name.of.policy', 'Energy.Type', 'Date.of.entry.info.force','Value.committed..USD')
```

```{r}
# removing NA for date of entry
policy$'Date.of.entry.info.force' <- na_if(policy$'Date.of.entry.info.force', "")
policy <- policy |>
  filter(!is.na(Date.of.entry.info.force))
```

```{r}
# remove 0 for value committed
policy <- policy |>
  filter(Value.committed..USD != 0)
```

```{r}
# keep 'clean conditional' and 'clean unconditional' policies
policy <- policy |>
  filter(Policy.Category %in% c('clean conditional', 'clean unconditional'))
```

```{r}
# importing data
epi <- read_csv('data/epi2022regionalresults05302022.csv')
```

```{r}
# selecting only country and climate change relevant measures
cc <- epi |>
  select(country, PCC.new)
```

```{r}
setdiff(policy$Country, cc$country) #in policy but not in cc
# recode countries in cc
cc <- cc |> mutate(country = recode(country,
                           "Netherlands" = "The Netherlands",
                           "United States of America" = "United States",
                           "Viet Nam" = "Vietnam",
                           "South Korea" = "Republic of Korea"))
```

```{r}
# remove 'European Institutions' from country in policy
policy <- policy |>
  filter(Country != 'European Institutions')
```
